import{r as c,a as u,F as S,j as t}from"./index.54ddac3f.js";import"./031552d1.js";import"./92b9d14f.js";import"./1508c40e.js";import"./67a52884.js";import{u as P,S as $}from"./bb7f6cb0.js";import{BaseButton as L}from"./1aa0194a.js";import{M as I}from"./1b9e03c3.js";import"./2a1e70c3.js";import{u as k}from"./f2956b00.js";import{P as A}from"./dbd559f6.js";import"./02cc2cb3.js";import"./f2203e5d.js";import{B as v}from"./d28cb3cb.js";import{n as B,I as T,a as U}from"./2289f115.js";import"./7b865f28.js";import{T as O}from"./63a461d4.js";/* empty css        */import{r as y}from"./f1a2c6d7.js";import"./e060e02f.js";import"./acfde4a0.js";import"./bb1f20da.js";import"./75ea911c.js";import"./1986dff3.js";import"./ab8c4ae3.js";import"./2d959f92.js";function R(){return typeof document!="undefined"}function C(){const n=c.exports.useContext(A);if(!n)throw new Error("'useProductOptions' must be a child of <ProductOptionsProvider/>");return n}function j(n){var w;const[e,o]=c.exports.useState(!1),{variantId:l,quantity:i=1,attributes:a,onClick:p,children:r,accessibleAddingToCartLabel:d,...b}=n,{status:x,linesAdd:h}=P(),{selectedVariant:f}=C(),s=(w=l!=null?l:f==null?void 0:f.id)!=null?w:"",m=l===null||s===""||f===null||e||b.disabled;c.exports.useEffect(()=>{e&&x==="idle"&&o(!1)},[x,e]);const g=c.exports.useCallback(()=>{o(!0),h([{quantity:i,merchandiseId:s,attributes:a}])},[h,i,s,a]);return u(S,{children:[t(L,{...b,disabled:m,onClick:p,defaultOnClick:g,children:r}),d?t("p",{style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},role:"alert","aria-live":"assertive",children:e?d:null}):null]})}function mt(){var h,f;const{pathname:n,search:e}=k(),[o,l]=c.exports.useState(new URLSearchParams(e)),{options:i,setSelectedOption:a,selectedOptions:p,selectedVariant:r}=C(),d=!(r!=null&&r.availableForSale)||!1,b=((h=r==null?void 0:r.priceV2)==null?void 0:h.amount)<((f=r==null?void 0:r.compareAtPriceV2)==null?void 0:f.amount)||!1;c.exports.useEffect(()=>{o||!e||l(new URLSearchParams(e))},[o,e]),c.exports.useEffect(()=>{i.map(({name:s,values:m})=>{if(!o)return;const g=o.get(s.toLowerCase())||null;if(g){const w=m.filter(N=>encodeURIComponent(N.toLowerCase())===g);a(s,w[0])}else o.set(encodeURIComponent(s.toLowerCase()),encodeURIComponent(p[s].toLowerCase())),window.history.replaceState(null,"",`${n}?${o.toString()}`)})},[]);const x=c.exports.useCallback((s,m)=>{a(s,m),o&&(o.set(encodeURIComponent(s.toLowerCase()),encodeURIComponent(m.toLowerCase())),R()&&window.history.replaceState(null,"",`${n}?${o.toString()}`))},[a,o,n]);return u("form",{className:"grid gap-10",children:[t("div",{className:"grid gap-4",children:i.map(({name:s,values:m})=>m.length===1?null:u("div",{className:"flex flex-col flex-wrap mb-4 gap-y-2 last:mb-0",children:[t(B,{as:"legend",size:"lead",className:"min-w-[4rem]",children:s}),t("div",{className:"flex flex-wrap items-baseline gap-4",children:t(F,{name:s,handleChange:x,values:m})})]},s))}),u("div",{className:"grid items-stretch gap-4",children:[t(j,{variantId:r==null?void 0:r.id,quantity:1,accessibleAddingToCartLabel:"Adding item to your cart",disabled:d,children:t(v,{width:"full",variant:d?"secondary":"primary",as:"span",children:d?t(O,{children:"Sold out"}):u(O,{as:"span",className:"flex items-center justify-center gap-2",children:[t("span",{children:"Add to bag"})," ",t("span",{children:"\xB7"})," ",t(I,{withoutTrailingZeros:!0,data:r.priceV2,as:"span"}),b&&t(I,{withoutTrailingZeros:!0,data:r.compareAtPriceV2,as:"span",className:"opacity-50 strike"})]})})}),!d&&t($,{variantIds:[r.id]})]})]})}function F({values:n,...e}){return n.length>7?t(D,{values:n,...e}):t(E,{values:n,...e})}function E({values:n,name:e,handleChange:o}){const{selectedOptions:l}=C();return t(S,{children:n.map(i=>{const a=l[e]===i,p=`option-${e}-${i}`;return u(O,{as:"label",htmlFor:p,children:[t("input",{className:"sr-only",type:"radio",id:p,name:`option[${e}]`,value:i,checked:a,onChange:()=>o(e,i)}),t("div",{className:`leading-none py-1 border-b-[1.5px] cursor-pointer transition-all duration-200 ${a?"border-primary/50":"border-primary/0"}`,children:i})]},p)})})}function D({values:n,name:e,handleChange:o}){const[l,i]=c.exports.useState(!1),{selectedOptions:a}=C(),p=c.exports.useCallback(r=>{o(e,r)},[e,o]);return t("div",{className:"relative w-full",children:t(y,{onChange:p,value:"",children:({open:r})=>(setTimeout(()=>i(r)),u(S,{children:[u(y.Button,{className:`flex items-center justify-between w-full py-3 px-4 border border-primary ${r?"rounded-b md:rounded-t md:rounded-b-none":"rounded"}`,children:[t("span",{children:a[e]}),t(T,{direction:r?"up":"down"})]}),t(y.Options,{className:`border-primary bg-contrast absolute bottom-12 z-30 grid
                h-48 w-full overflow-y-scroll rounded-t border px-2 py-2 transition-[max-height]
                duration-150 sm:bottom-auto md:rounded-b md:rounded-t-none md:border-t-0 md:border-b ${l?"max-h-48":"max-h-0"}`,children:n.map(d=>{const b=a[e]===d,x=`option-${e}-${d}`;return t(y.Option,{value:d,children:({active:h})=>u("div",{className:`text-primary w-full p-2 transition rounded flex justify-start items-center text-left cursor-pointer ${h?"bg-primary/10":null}`,children:[d,b?t("span",{className:"ml-2",children:t(U,{})}):null]})},x)})})]}))})})}export{mt as ProductForm};
//# sourceMappingURL=9777da8d.js.map
